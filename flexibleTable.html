<!-- flexibleTable.html -->
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Flexible Table with Dynamic Filters</title>
<style>
  .clickable { cursor: pointer; }
  .indent { padding-left: 20px; }
</style>
</head>
<!-- flexibleTable.html -->
<body>

    <div id="filtersDiv"></div> <!-- Target div for the filters -->
    <div id="tableContainer"></div> <!-- Div for the table -->
    
    <script type="module">
        import { FlexibleTable } from './flexibleTable.js';
        import { FilterManager } from './filterManager.js';

        document.addEventListener('DOMContentLoaded', () => {
            // Step 1: Initialize FilterManager first
            const initialFilters = {
                Program: true,
                Project: false,
                Task: true
            };

            let filterManager = new FilterManager('filtersDiv', filters => {}, initialFilters);
            
            // Step 2: Use FilterManager's filters to initialize FlexibleTable
            let flexibleTable = new FlexibleTable('tableContainer', filterManager.filters);
            
            // Step 3: Ensure FilterManager updates FlexibleTable upon filter changes
            filterManager.onFilterChangeCallback = (filters) => {
                flexibleTable.updateFilters(filters);
            };
        });
    </script>
    
</body>

</html>
